{"posts":[{"title":"","text":"","link":"/2024/05/01/%E7%88%B1%E6%B2%B3/"},{"title":"","text":"","link":"/2021/02/08/%E5%A4%A7%E9%9B%BE%E5%9B%9B%E8%B5%B7/"},{"title":"如何理解response对象的转发和重定向","text":"@RUOHAN 转发( forward) 和重定向( redirect ) Forward和Redirect代表了两种请求转发方式:直接转发和间接转发。 直接转发方式( Forward) 客户端和浏览器只发出一次请求, Servlet、 HTML、JSP或其它信息资源,由第二个信息资源响应该请求,在请求对象request中,保存的对象对于每个信息资源是共享的。 间接转发方式( Redirect ) 实际是两次请求,服务器端在响应第一次请求的时候 ,让浏览器再向另外一个URL发出请求,从而达到转发的目的。 1.重定向( redirect ) 是指客户端向服务器Servlet1发送一个请求，而服务器Servlet1经过处理返回一个新的重新定向的指令，告诉客户端你现在需要访问另一个服务器Servlet2。 例如，我们编写一个能够处理登录服务的loginServlet，如果接收到客户端post请求经过loginServlet处理，如果登陆成功则跳转到登录界面登录界面代码： 12345678910111213141516171819202122232425262728293031&lt;%@ page language=&quot;java&quot; import=&quot;java.util.*&quot; pageEncoding=&quot;utf-8&quot;%&gt;&lt;% String path = request.getContextPath(); String basePath = request.getScheme() + &quot;://&quot; + request.getServerName() + &quot;:&quot; + request.getServerPort() + path + &quot;/&quot;;%&gt;&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;&gt;&lt;html&gt; &lt;head&gt; &lt;base href=&quot;&lt;%=basePath%&gt;&quot;&gt; &lt;title&gt;My JSP 'login.jsp' starting page&lt;/title&gt; &lt;meta http-equiv=&quot;pragma&quot; content=&quot;no-cache&quot;&gt; &lt;meta http-equiv=&quot;cache-control&quot; content=&quot;no-cache&quot;&gt; &lt;meta http-equiv=&quot;expires&quot; content=&quot;0&quot;&gt; &lt;meta http-equiv=&quot;keywords&quot; content=&quot;keyword1,keyword2,keyword3&quot;&gt; &lt;meta http-equiv=&quot;description&quot; content=&quot;This is my page&quot;&gt; &lt;/head&gt; &lt;body&gt; &lt;form action=&quot;loginServlet.jsp&quot; method=&quot;post&quot;&gt; 用户名 &lt;input type=&quot;text&quot; name=&quot;userName&quot; /&gt; &lt;/br&gt; 密码 &lt;input type=&quot;text&quot; name=&quot;pwd&quot; /&gt; &lt;/br&gt; &lt;input type=&quot;submit&quot; value=&quot;登录&quot; /&gt; &lt;/form&gt; &lt;/body&gt;&lt;/html&gt; 处理登录的loginServlet服务代码： 123456789101112131415161718192021222324252627282930313233&lt;%@ page language=&quot;java&quot; import=&quot;java.util.*&quot; pageEncoding=&quot;utf-8&quot;%&gt;&lt;% String path = request.getContextPath(); String basePath = request.getScheme() + &quot;://&quot; + request.getServerName() + &quot;:&quot; + request.getServerPort() + path + &quot;/&quot;;%&gt;&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;&gt;&lt;html&gt; &lt;head&gt; &lt;base href=&quot;&lt;%=basePath%&gt;&quot;&gt; &lt;title&gt;My JSP 'loginServlet.jsp' starting page&lt;/title&gt; &lt;meta http-equiv=&quot;pragma&quot; content=&quot;no-cache&quot;&gt; &lt;meta http-equiv=&quot;cache-control&quot; content=&quot;no-cache&quot;&gt; &lt;meta http-equiv=&quot;expires&quot; content=&quot;0&quot;&gt; &lt;meta http-equiv=&quot;keywords&quot; content=&quot;keyword1,keyword2,keyword3&quot;&gt; &lt;meta http-equiv=&quot;description&quot; content=&quot;This is my page&quot;&gt; &lt;/head&gt; &lt;body&gt; &lt;% //接收客户端发送的用户名，密码 String pwd = request.getParameter(&quot;pwd&quot;); String userName = request.getParameter(&quot;userName&quot;); //我们设定用户名为：zhangsan,密码为：123 if (&quot;zhangsan&quot;.equals(userName) &amp;&amp; &quot;123&quot;.equals(pwd)) { //当登录成功时跳转到登陆成功界面 //发送重定向响应 response.sendRedirect(&quot;success.jsp&quot;); } %&gt; &lt;/body&gt;&lt;/html&gt; 登录成功界面代码： 123456789101112131415161718192021222324252627282930313233&lt;%@ page language=&quot;java&quot; import=&quot;java.util.*&quot; pageEncoding=&quot;utf-8&quot;%&gt;&lt;% String path = request.getContextPath(); String basePath = request.getScheme() + &quot;://&quot; + request.getServerName() + &quot;:&quot; + request.getServerPort() + path + &quot;/&quot;;%&gt;&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;&gt;&lt;html&gt; &lt;head&gt; &lt;base href=&quot;&lt;%=basePath%&gt;&quot;&gt; &lt;title&gt;My JSP 'success.jsp' starting page&lt;/title&gt; &lt;meta http-equiv=&quot;pragma&quot; content=&quot;no-cache&quot;&gt; &lt;meta http-equiv=&quot;cache-control&quot; content=&quot;no-cache&quot;&gt; &lt;meta http-equiv=&quot;expires&quot; content=&quot;0&quot;&gt; &lt;meta http-equiv=&quot;keywords&quot; content=&quot;keyword1,keyword2,keyword3&quot;&gt; &lt;meta http-equiv=&quot;description&quot; content=&quot;This is my page&quot;&gt; &lt;!-- &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;styles.css&quot;&gt; --&gt; &lt;/head&gt; &lt;body&gt; &lt;h1&gt; 登录成功! &lt;/h1&gt; &lt;/body&gt;&lt;/html&gt; 接下来在浏览器中进行测试1.在浏览器中输入post请求登录（客户端login界面向loginServlet服务器发送一次请求）2.当输入正确的用户名密码跳转到登陆成功界面（当用户名密码正确时，loginServlet服务器做出一次响应告诉客户端需要跳转到登陆成功界面，接着客户端对success.jsp做出一次请求，最终得到success.jsp页面登录成功的响应） 2.转发( forward) 是指当客户端向Servlet1发送一个请求时，Servlet1可以决定自己不错处理而转发给Servlet2做处理 例如，当输入错误的密码登陆失败时，将跳转到重新登录界面并反馈密码错误的信息。 login登录界面代码： 1234567891011121314151617181920212223242526272829303132333435363738&lt;%@ page language=&quot;java&quot; import=&quot;java.util.*&quot; pageEncoding=&quot;utf-8&quot;%&gt;&lt;% String path = request.getContextPath(); String basePath = request.getScheme() + &quot;://&quot; + request.getServerName() + &quot;:&quot; + request.getServerPort() + path + &quot;/&quot;;%&gt;&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;&gt;&lt;html&gt; &lt;head&gt; &lt;base href=&quot;&lt;%=basePath%&gt;&quot;&gt; &lt;title&gt;My JSP 'login.jsp' starting page&lt;/title&gt; &lt;meta http-equiv=&quot;pragma&quot; content=&quot;no-cache&quot;&gt; &lt;meta http-equiv=&quot;cache-control&quot; content=&quot;no-cache&quot;&gt; &lt;meta http-equiv=&quot;expires&quot; content=&quot;0&quot;&gt; &lt;meta http-equiv=&quot;keywords&quot; content=&quot;keyword1,keyword2,keyword3&quot;&gt; &lt;meta http-equiv=&quot;description&quot; content=&quot;This is my page&quot;&gt; &lt;/head&gt; &lt;body&gt; &lt;% String message = &quot;&quot;; message = (String) request.getAttribute(&quot;message&quot;); if (message == null) message = &quot;&quot;; %&gt; &lt;form action=&quot;loginServlet.jsp&quot; method=&quot;post&quot;&gt; 用户名 &lt;input type=&quot;text&quot; name=&quot;userName&quot; /&gt; &lt;/br&gt; 密码 &lt;input type=&quot;text&quot; name=&quot;pwd&quot; /&gt; &lt;span style=&quot;color: red&quot;&gt;&lt;%=message%&gt;&lt;/span&gt; &lt;/br&gt; &lt;input type=&quot;submit&quot; value=&quot;登录&quot; /&gt; &lt;/form&gt; &lt;/body&gt;&lt;/html&gt; loginServlet服务代码： 12345678910111213141516171819202122232425262728293031323334353637383940414243&lt;%@ page language=&quot;java&quot; import=&quot;java.util.*&quot; pageEncoding=&quot;utf-8&quot;%&gt;&lt;% String path = request.getContextPath(); String basePath = request.getScheme() + &quot;://&quot; + request.getServerName() + &quot;:&quot; + request.getServerPort() + path + &quot;/&quot;;%&gt;&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;&gt;&lt;html&gt; &lt;head&gt; &lt;base href=&quot;&lt;%=basePath%&gt;&quot;&gt; &lt;title&gt;My JSP 'loginServlet.jsp' starting page&lt;/title&gt; &lt;meta http-equiv=&quot;pragma&quot; content=&quot;no-cache&quot;&gt; &lt;meta http-equiv=&quot;cache-control&quot; content=&quot;no-cache&quot;&gt; &lt;meta http-equiv=&quot;expires&quot; content=&quot;0&quot;&gt; &lt;meta http-equiv=&quot;keywords&quot; content=&quot;keyword1,keyword2,keyword3&quot;&gt; &lt;meta http-equiv=&quot;description&quot; content=&quot;This is my page&quot;&gt; &lt;/head&gt; &lt;body&gt; &lt;% //接收客户端发送的用户名，密码 String pwd = request.getParameter(&quot;pwd&quot;); String userName = request.getParameter(&quot;userName&quot;); //我们设定用户名为：zhangsan,密码为：123 if (&quot;zhangsan&quot;.equals(userName) &amp;&amp; &quot;123&quot;.equals(pwd)) { //当登录成功时跳转到登陆成功界面 //发送重定向响应 response.sendRedirect(&quot;success.jsp&quot;); } else { //当登陆失败时跳转到登录页面并反馈错误信息 //转发 //设置转发内容 request.setAttribute(&quot;message&quot;, &quot;密码错误!&quot;); //调用getRequestDispacther()方法，把请求转发给login.jsp request.getRequestDispatcher(&quot;login.jsp&quot;).forward(request, response); } %&gt; &lt;/body&gt;&lt;/html&gt; 接下来在浏览器中进行测试1.在浏览器中输入错误的密码，点击登录（客户端login界面向loginServlet服务器发送一次请求）2.当输入错误密码时跳转到登录页面，并且反馈出错误信息(loginServlet服务器将请求转发给login.jsp做出一次响应反馈出错误信息) 整个过程一个请求，一个响应。","link":"/2020/10/19/%E5%A6%82%E4%BD%95%E7%90%86%E8%A7%A3response%E5%AF%B9%E8%B1%A1%E7%9A%84%E8%BD%AC%E5%8F%91%E5%92%8C%E9%87%8D%E5%AE%9A%E5%90%91/"}],"tags":[],"categories":[{"name":"前端","slug":"前端","link":"/categories/%E5%89%8D%E7%AB%AF/"}],"pages":[{"title":"categories","text":"","link":"/categories/index.html"}]}